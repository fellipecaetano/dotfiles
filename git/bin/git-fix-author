#!/bin/sh

source "$(git --exec-path)/git-sh-setup"

while getopts "e:n:" option; do
    case $option in
	e)
	    export email=$OPTARG
	    ;;
	n)
	    export name=$OPTARG
	    ;;
    esac
done

git filter-branch --env-filter \
    'if [ "$GIT_AUTHOR_EMAIL" != "$email" ]; then
    	GIT_AUTHOR_EMAIL=$email;
	GIT_COMMITER_EMAIL=$GIT_AUTHOR_EMAIL;
     fi' -- --all

